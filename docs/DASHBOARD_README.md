# System Monitor Terminal Dashboard - Stage 3

## Overview

The Terminal Dashboard provides a **live, real-time visualization** of system metrics in your terminal using the `rich` library. It reads data from the existing JSON files generated by the PowerShell/Bash monitoring infrastructure.

## Features

✅ **Real-time Updates** - Refreshes every 2 seconds automatically  
✅ **Visual Progress Bars** - Animated bars for CPU, memory, and disk usage  
✅ **Color-Coded Metrics** - Green (<60%), Yellow (60-80%), Red (>80%)  
✅ **Alert Display** - Shows system alerts with proper color coding  
✅ **Cross-Platform** - Works on Windows, Linux, and macOS  
✅ **Error Handling** - Gracefully handles missing or malformed data  

## Quick Start

### Installation

```bash
# Install Python dependencies
pip install -r requirements.txt
```

### Running the Dashboard

```bash
# Basic usage (reads from default paths)
python dashboard_tui.py

# With custom paths
python dashboard_tui.py --metrics-path data/metrics/current.json --alerts-path data/alerts/alerts.json

# With verbose logging
python dashboard_tui.py --verbose
```

### Exit

Press **Ctrl+C** to stop the dashboard.

## Architecture

```
Stage 3 Components:
├── core/
│   ├── metrics_collector.py   # Reads current.json
│   └── alert_manager.py        # Reads alerts.json
│
├── display/
│   └── tui_dashboard.py        # Terminal UI rendering
│
├── dashboard_tui.py            # Main launcher
└── tests/python/               # Unit tests
```

## Dashboard Layout

```
┌─────────────────────────────────────────────────────────────┐
│ SYSTEM MONITOR DASHBOARD - [hostname] [timestamp]          │
├─────────────────────────────────────────────────────────────┤
│ CPU                          │  MEMORY                      │
│ Usage: 45.2% [████████░░]   │  Used: 8.5 GB / 16 GB       │
│ Load: 1.2, 1.5, 1.8          │  Usage: 53% [█████░░░░░]    │
│ Temp: 65°C                   │                              │
│                              │  NETWORK                      │
│ DISK                         │  RX: 1.2 GB                  │
│ C:\ 120 GB / 500 GB (24%)    │  TX: 0.8 GB                  │
│ [██████░░░░░░░░░░░░░░]      │                              │
├─────────────────────────────────────────────────────────────┤
│ ALERTS (2)                                                  │
│ ⚠️  WARNING  CPU usage above 80% (85.5%)                    │
│ ℹ️  INFO     Disk C:\ below 30% free space                  │
└─────────────────────────────────────────────────────────────┘
```

## Data Sources

### Metrics (current.json)

The dashboard reads system metrics from `data/metrics/current.json`, which is generated by:
- **Windows**: `scripts/main_monitor.ps1`
- **Unix/Linux**: `scripts/main_monitor.sh`

Ensure these scripts are running to populate metrics data.

### Alerts (alerts.json)

The dashboard reads alerts from `data/alerts/alerts.json`. The alert format:

```json
{
  "timestamp": "2025-12-05T10:30:00Z",
  "alerts": [
    {
      "level": "warning|critical|info",
      "metric": "cpu|memory|disk|temperature|...",
      "message": "Human-readable message",
      "value": 85.5,
      "threshold": 80.0,
      "timestamp": "2025-12-05T10:30:00Z"
    }
  ]
}
```

## Testing

### Run Unit Tests

```bash
# Run all tests
pytest tests/python/ -v

# With coverage
pytest tests/python/ --cov=core --cov=display --cov-report=html

# Run specific test file
pytest tests/python/test_metrics_collector.py -v
```

### Test Coverage

All modules have comprehensive unit tests with >80% coverage:
- ✅ `core/metrics_collector.py` - 30+ tests
- ✅ `core/alert_manager.py` - 25+ tests  
- ✅ `display/tui_dashboard.py` - 20+ tests

## Configuration

### Refresh Rate

Edit `display/tui_dashboard.py`:

```python
REFRESH_RATE = 2  # seconds
```

### Color Thresholds

Edit `display/tui_dashboard.py`:

```python
COLOR_THRESHOLD_LOW = 60   # Green to Yellow
COLOR_THRESHOLD_HIGH = 80  # Yellow to Red
```

## Troubleshooting

### Dashboard shows "N/A" for all metrics

**Solution**: Ensure the monitoring scripts are running and generating `current.json`:

```bash
# Windows
.\scripts\main_monitor.ps1

# Unix/Linux
./scripts/main_monitor.sh
```

### No alerts displayed

**Solution**: The alerts file is empty by default. Alerts can be added programmatically:

```python
from core.alert_manager import add_alert

add_alert(
    metric='cpu',
    level='warning',
    message='CPU usage above 80%',
    value=85.5,
    threshold=80.0
)
```

### Module not found errors

**Solution**: Ensure you're running from the project root directory:

```bash
cd c:\Users\DELL\Desktop\system-monitor-project
python dashboard_tui.py
```

### Permission errors on log file

**Solution**: Ensure the `data/logs/` directory exists and is writable:

```bash
mkdir -p data/logs
```

## Integration

### Running with Monitoring Scripts

**Option 1: Manual**

```bash
# Terminal 1: Start monitoring
.\scripts\main_monitor.ps1

# Terminal 2: Start dashboard
python dashboard_tui.py
```

**Option 2: Automated (Windows)**

Create `start_monitoring.bat`:

```batch
@echo off
start "Monitor" powershell -Command ".\scripts\main_monitor.ps1"
timeout /t 5
start "Dashboard" python dashboard_tui.py
```

**Option 3: Automated (Unix/Linux)**

Create `start_monitoring.sh`:

```bash
#!/bin/bash
./scripts/main_monitor.sh &
sleep 5
python3 dashboard_tui.py
```

## Success Criteria

✅ Numbers update every 2 seconds  
✅ Progress bars animate based on metrics  
✅ Alerts display correctly with color coding  
✅ No crashes or errors  
✅ Unit tests pass with >80% coverage  
✅ Works on Windows, Linux, macOS  

## Next Steps

- **Stage 4**: Add web-based dashboard
- **Stage 5**: Implement alerting system
- **Stage 6**: Add historical data visualization

## License

Part of the system-monitor-project. See main README for details.
