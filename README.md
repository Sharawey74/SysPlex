# Hybrid System Monitoring Platform - Stage 4 Complete âœ…

A comprehensive cross-platform system monitoring solution with native collectors (Bash/PowerShell), real-time terminal dashboard, and web-based monitoring with RESTful API.

## ğŸ³ Deployment Options

### Two-Tier Architecture (Production) âœ…
**Best for**: Production, full hardware monitoring  
**Port**: 5000  
**Quick Start**: `bash start-system-monitor.sh`  
ğŸ“– [Full Guide](QUICKSTART.md)

### FC Mode (Development) ğŸ§ª  
**Best for**: Testing, demos, learning  
**Port**: 5100  
**Quick Start**: `cd Docker && docker-compose -f docker-compose.fc.yml up -d`  
ğŸ“– [FC Guide](Docker/FC_QUICKSTART.md)

## Features

### Stage 3 Features (Terminal Dashboard)
- **ğŸ¯ Universal Launcher**: Single entry point for all platforms - automatic OS detection
- **ğŸ“Š Live Terminal Dashboard**: Real-time TUI with 2-second refresh using Rich library
- **Cross-Platform Support**: Native implementations for Unix (Bash) and Windows (PowerShell)
- **Comprehensive Metrics**: CPU, memory, disk, network, temperature, GPU, fans, SMART disk health
- **Visual Progress Bars**: Color-coded thresholds (green <60%, yellow 60-80%, red >80%)
- **Network Interface Details**: Shows top 3 active interfaces with RX/TX stats
- **Production-Ready**: Error handling, logging, UTF-8 BOM support, graceful degradation
- **Fully Tested**: 75+ unit tests with 98.7% pass rate
- **JSON Interchange**: Standardized format between monitors and dashboard

### Stage 4 Features (Web Dashboard) ğŸ†•
- **ğŸŒ Web Dashboard**: Browser-based monitoring interface with responsive design
- **ğŸ”Œ RESTful API**: 7 endpoints for metrics, alerts, and report management
- **ğŸ“„ Report Generation**: Automated HTML + Markdown report creation
- **âš¡ Real-time Updates**: Auto-refresh every 3 seconds via JavaScript polling
- **ğŸ“± Mobile Friendly**: Responsive design works on all devices
- **ğŸ¨ Modern UI**: Color-coded panels with progress bars and animations
- **ğŸš¨ Alert Display**: Recent alerts with severity badges
- **ğŸ”’ Network Accessible**: Monitor from any device on your network

## Directory Structure

```
system-monitor-project/
â”œâ”€â”€ universal.py                     # ğŸš€ Universal launcher (OS detection + routing)
â”œâ”€â”€ dashboard_tui.py                 # ğŸ“Š Terminal dashboard entry point
â”œâ”€â”€ dashboard_web.py                 # ğŸŒ Web dashboard entry point (Stage 4)
â”œâ”€â”€ requirements.txt                 # Python dependencies
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ metrics_collector.py         # JSON parser (420 lines)
â”‚   â””â”€â”€ alert_manager.py             # Alert CRUD operations (280 lines)
â”œâ”€â”€ display/
â”‚   â””â”€â”€ tui_dashboard.py             # Rich TUI dashboard (500+ lines)
â”œâ”€â”€ web/
â”‚   â”œâ”€â”€ dashboard.py                 # Flask web app (220 lines)
â”‚   â””â”€â”€ report_generator.py          # Report generation (150 lines)
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ index.html                   # Web dashboard HTML
â”‚   â””â”€â”€ report_template.html         # Report HTML template
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ styles.css                   # Dashboard CSS
â”‚   â””â”€â”€ script.js                    # Dashboard JavaScript
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ main_monitor.sh              # Unix orchestrator
â”‚   â”œâ”€â”€ install.sh                   # Installation script
â”‚   â””â”€â”€ monitors/unix/               # 8 Unix collectors (Bash)
â”œâ”€â”€ windows/                         # ğŸ†• All Windows PowerShell Scripts
â”‚   â”œâ”€â”€ scripts/
â”‚   â”‚   â””â”€â”€ main_monitor.ps1         # Windows orchestrator
â”‚   â”œâ”€â”€ monitors/                    # 8 Windows collectors (PowerShell)
â”‚   â”œâ”€â”€ utils/                       # Utility scripts (JSON, logging)
â”‚   â””â”€â”€ tests/                       # 12 PowerShell test files
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ metrics/
â”‚   â”‚   â””â”€â”€ current.json             # Metrics output (generated by monitors)
â”‚   â”œâ”€â”€ alerts/
â”‚   â”‚   â””â”€â”€ alerts.json              # Alerts data
â”‚   â””â”€â”€ logs/
â”‚       â”œâ”€â”€ system.log               # Monitor logs
â”‚       â””â”€â”€ dashboard.log            # Dashboard logs
â”œâ”€â”€ reports/                         # ğŸ†• Generated Reports (Stage 4)
â”‚   â”œâ”€â”€ html/                        # HTML reports
â”‚   â””â”€â”€ markdown/                    # Markdown reports
â””â”€â”€ tests/
    â”œâ”€â”€ python/                      # 6 Python test files (75 tests)
    â”œâ”€â”€ docker/                      # ğŸ†• Docker test suite
    â”‚   â”œâ”€â”€ test_docker_metrics.py   # Container metrics testing
    â”‚   â”œâ”€â”€ test_bash_validation.py  # Bash script validation
    â”‚   â””â”€â”€ conftest.py              # Pytest configuration
    â””â”€â”€ unix/                        # Unix test suite (9 tests + runner)
```

## Stage 3: Terminal Dashboard Features

### Real-Time Visualization

- **2-Second Refresh**: Live updates without flickering
- **6-Panel Layout**: Header + CPU/Memory + Temperature/Network + Disk + Alerts footer
- **Color Coding**: 
  - ğŸŸ¢ Green: < 60% usage
  - ğŸŸ¡ Yellow: 60-80% usage
  - ğŸ”´ Red: > 80% usage

### Metrics Displayed

1. **CPU Panel**: Usage %, load average (1/5/15 min), cores, model
2. **Memory Panel**: Used/Total GB, usage % with bar, free memory
3. **Temperature Panel**: CPU & GPU temperatures with vendor (Intel/AMD/NVIDIA)
4. **Disk Panel**: All drives with usage %, used/total GB, progress bars
5. **Network Panel**: Total RX/TX + top 3 interfaces with individual traffic
6. **Alerts Panel**: Color-coded notifications (info/warning/critical)

### Technical Highlights

- **UTF-8 BOM Handling**: Properly reads PowerShell-generated JSON files
- **Graceful Degradation**: Shows "N/A" for unavailable metrics
- **No Data Duplication**: Reads existing JSON, doesn't re-collect
- **Cross-Platform**: Works on Windows, Linux, macOS, WSL2

## Installation

### Python Requirements

**Stage 3 (Terminal Dashboard):**
```bash
pip install rich>=13.0.0
```

**Stage 4 (Web Dashboard):**
```bash
pip install Flask>=3.0.0 Jinja2>=3.1.0

# Or install everything
pip install -r requirements.txt
```

### Windows (PowerShell)

```powershell
cd c:\Users\DELL\Desktop\wso\system-monitor-project
# No installation needed - PowerShell scripts run directly
```

### Unix (Linux/macOS)

```bash
cd /path/to/system-monitor-project
bash scripts/install.sh
```

The install script will:
- Create required directories
- Set executable permissions
- Check for optional tools (sensors, smartctl, jq)

## Quick Start

### Universal Launcher (Recommended - All Platforms)

```bash
# Run monitors + launch dashboard
python universal.py --dashboard

# Run monitors only (one-time)
python universal.py

# Continuous monitoring (30-second interval)
python universal.py --watch --interval 30

# View live dashboard (if monitors already running)
python dashboard_tui.py
```

**Workflow:**
1. `universal.py` detects your OS (Windows/Linux/macOS)
2. Automatically runs appropriate monitoring scripts (PowerShell or Bash)
3. Generates `data/metrics/current.json`
4. Launches dashboard to visualize metrics in real-time

### Stage 4: Web Dashboard Usage ğŸ†•

```bash
# Start web dashboard
python dashboard_web.py

# Custom port
python dashboard_web.py --port 8080

# Network accessible (all interfaces)
python dashboard_web.py --host 0.0.0.0

# With debug mode
python dashboard_web.py --debug
```

**Access the dashboard:**
- Web UI: http://localhost:5000
- API Metrics: http://localhost:5000/api/metrics
- API Alerts: http://localhost:5000/api/alerts
- API Reports: http://localhost:5000/api/reports

**Generate reports:**
- Click "Generate Report" button in web UI
- Or via API: `POST http://localhost:5000/api/reports/generate`
- Reports saved to `reports/html/` and `reports/markdown/`

### Python Dependencies

```bash
pip install -r requirements.txt
```

Required packages:
- `rich>=13.0.0` - Terminal UI rendering (Stage 3)
- `Flask>=3.0.0` - Web framework (Stage 4)
- `Jinja2>=3.1.0` - Template engine (Stage 4)
- `pytest>=7.0.0` - Testing framework (dev)

## Platform-Specific Usage

### Windows

Run the monitoring system:
```powershell
.\scripts\main_monitor.ps1
```

View results:
```powershell
Get-Content data\metrics\current.json
```

Run tests:
```powershell
.\tests\windows\Run-AllTests.ps1
```

### Unix (Linux/macOS)

Run the monitoring system:
```bash
bash scripts/main_monitor.sh
```

View results:
```bash
cat data/metrics/current.json
```

Run tests:
```bash
bash tests/unix/run_all_tests.sh
```

## Collectors

### Core Collectors (Available on all platforms)

1. **CPU Monitor**: Usage percentage and load averages
2. **Memory Monitor**: Total, used, free, and available memory
3. **Disk Monitor**: Usage statistics for all mounted drives
4. **Network Monitor**: RX/TX bytes for all network interfaces
5. **System Monitor**: OS info, hostname, uptime, kernel version

### Optional Collectors (May return "unavailable" or "restricted")

6. **Temperature Monitor**: CPU/GPU temperatures (requires sensors on Unix, WMI on Windows)
7. **Fan Monitor**: Fan speeds (requires sensors on Unix, WMI on Windows)
8. **SMART Monitor**: Disk health data (requires smartctl/admin privileges)

## JSON Output Format

```json
{
  "timestamp": "2025-12-02T15:20:00Z",
  "system": {
    "os": "Windows 10 Pro",
    "hostname": "DESKTOP-ABC123",
    "uptime_seconds": 123456,
    "kernel": "10.0.19045"
  },
  "cpu": {
    "usage_percent": 25.3,
    "load_1": 0.15,
    "load_5": 0.12,
    "load_15": 0.10
  },
  "memory": {
    "total_mb": 16384,
    "used_mb": 8192,
    "free_mb": 8192,
    "available_mb": 8192
  },
  "disk": [
    {
      "device": "C:",
      "filesystem": "NTFS",
      "total_gb": 256.00,
      "used_gb": 120.50,
      "used_percent": 47.1
    }
  ],
  "network": [
    {
      "iface": "Ethernet",
      "rx_bytes": 1234567890,
      "tx_bytes": 987654321
    }
  ],
  "temperature": {
    "status": "unavailable"
  },
  "fans": {
    "status": "unavailable"
  },
  "smart": {
    "status": "restricted"
  }
}
```

## Error Handling

All collectors handle errors gracefully:

- **Missing Tools**: Returns `"status": "unavailable"` if required tools aren't installed
- **Permission Issues**: Returns `"status": "restricted"` if elevated privileges are needed
- **Execution Errors**: Returns `"status": "error"` with error message
- **Exit Codes**: 0 for success, non-zero for failure

## Testing

### Windows Tests

Each PowerShell test validates:
- Script executes successfully
- Output is valid JSON
- Required fields are present

Run individual test:
```powershell
.\tests\windows\Test-CpuMonitor.ps1
```

Run all tests:
```powershell
.\tests\windows\Run-AllTests.ps1
```

### Unix Tests

Each Bash test validates:
- Exit code is 0
- Output is valid JSON (using jq or python if available)
- Required fields exist

Run individual test:
```bash
bash tests/unix/test_cpu_monitor.sh
```

Run all tests:
```bash
bash tests/unix/run_all_tests.sh
```

## Logging

All operations are logged to `data/logs/system.log` with timestamps:

```
[2025-12-02T15:20:00Z] [INFO] Starting system monitoring collection
[2025-12-02T15:20:01Z] [INFO] Running cpu_monitor.ps1
[2025-12-02T15:20:01Z] [INFO] cpu_monitor.ps1 completed successfully
...
```

## Optional Dependencies

### Unix/Linux

- **jq**: JSON processor (for test validation)
- **lm-sensors**: Temperature and fan monitoring
- **smartmontools**: Disk health monitoring
- **sysstat**: Enhanced CPU statistics

Install on Ubuntu/Debian:
```bash
sudo apt-get install jq lm-sensors smartmontools sysstat
```

Install on macOS:
```bash
brew install jq smartmontools sysstat
```

### Windows

- **PowerShell 5.1+**: Included with Windows 10/11
- **WMI**: Built-in (for temperature/fan monitoring)
- **Admin privileges**: Optional (for SMART data)

## Troubleshooting

### "Permission Denied" errors on Unix

Make scripts executable:
```bash
chmod +x scripts/*.sh scripts/monitors/unix/*.sh tests/unix/*.sh
```

Or run the install script:
```bash
bash scripts/install.sh
```

### Temperature/Fan data shows "unavailable"

- **Unix**: Install lm-sensors: `sudo apt-get install lm-sensors && sudo sensors-detect`
- **Windows**: Some systems don't expose WMI thermal data - this is normal

### SMART data shows "restricted"

- **Unix**: Run with sudo or add user to disk group
- **Windows**: Run PowerShell as Administrator

## Documentation

### Stage 3 (Terminal Dashboard)
- [QUICKSTART_STAGE3.md](docs/QUICKSTART_STAGE3.md) - Quick setup guide
- [DASHBOARD_README.md](docs/DASHBOARD_README.md) - Complete dashboard guide
- [STAGE3_SUMMARY.md](docs/STAGE3_SUMMARY.md) - Implementation details

### Stage 4 (Web Dashboard) ğŸ†•
- [QUICKSTART_STAGE4.md](docs/QUICKSTART_STAGE4.md) - 2-minute setup
- [STAGE4_COMPLETE.md](docs/STAGE4_COMPLETE.md) - Complete guide
- [STAGE4_SUMMARY.md](docs/STAGE4_SUMMARY.md) - Implementation summary
- [STAGE4_FILES.md](docs/STAGE4_FILES.md) - File inventory

### Additional Documentation
- [BUNDLED_LIBRARIES.md](docs/BUNDLED_LIBRARIES.md) - Hardware monitoring setup
- [GIT_COMMITS_GUIDE.md](docs/GIT_COMMITS_GUIDE.md) - Commit guidelines

## Project Status

âœ… **Stage 1**: Native Monitoring Scripts - COMPLETE  
âœ… **Stage 2**: JSON Data Pipeline - COMPLETE  
âœ… **Stage 3**: Terminal Dashboard (TUI) - COMPLETE (75 tests, 98.7% pass)  
âœ… **Stage 4**: Web Dashboard + Reports - COMPLETE (100% verified)  

**Total:** 2,860+ lines of production code for Stage 4

## Verification

### Stage 3 Verification
```bash
python verify_stage3.py
# Expected: 97.1% success rate
```

### Stage 4 Verification ğŸ†•
```bash
python verify_stage4.py
# Expected: 100% verification complete (11/11 checks)
```

## License

This is a student project for educational purposes.

## Future Enhancements

Possible additions beyond Stage 4:
- Historical data visualization with charts
- WebSocket for real-time push updates
- User authentication and multi-user support
- Multi-host monitoring aggregation
- Email/webhook alerting
- Data export (CSV, Excel)
- Docker containerization
